# wrapper around gradlew that checks if Docker services are required and
# running
# NOTE: this should be replaced by the docker-compose plugin https://github.com/avast/gradle-docker-compose-plugin
g() {
    if ! [ -z "$(ls docker-compose.yml)" ]; then
        local prj=$(basename $(pwd))
        if [ -z "$(docker ps --format "{{.Names}}" | cut -d_ -f1 | sort -u | grep $prj)" ]; then
            docker-compose up -d
        fi
    fi
    ./gradlew "$@"
}

# vim: ts=4:sw=4:et:ft=bash
